# see https://clang.llvm.org/docs/ClangFormatStyleOptions.html
---
BasedOnStyle: LLVM
Language: Cpp
Standard: Latest

# ================ BASIC FORMATTING ================
ColumnLimit: 100
IndentWidth: 4
UseTab: Never

# ================ INDENTATION RULES ================
IndentAccessModifiers: false
AccessModifierOffset: -4
NamespaceIndentation: All
IndentRequiresClause: false

# ================ BRACE WRAPPING ================
BreakBeforeBraces: Custom
BraceWrapping:
  # Types
  AfterClass: true
  AfterStruct: true
  AfterUnion: true
  AfterEnum: true

  # Code blocks
  AfterFunction: true
  AfterNamespace: true
  AfterExternBlock: true

  # Control flow
  AfterControlStatement: Always
  BeforeElse: true
  BeforeCatch: false
  BeforeLambdaBody: true

  # Empty handling
  SplitEmptyFunction: false
  SplitEmptyNamespace: false

# ================ SPACING RULES ================
# Parentheses
SpaceBeforeParens: Custom
SpaceBeforeParensOptions:
  AfterControlStatements: true
  AfterFunctionDefinitionName: false
  AfterOverloadedOperator: true
  AfterPlacementOperator: true
  AfterRequiresInClause: true
  BeforeNonEmptyParentheses: false
  AfterForeachMacros: true
  AfterIfMacros: true
  AfterNot: true

SpacesInParens: Never
SpacesInParensOptions:
  InConditionalStatements: false
  InCStyleCasts: false
  InEmptyParentheses: false
  ExceptDoubleParentheses: false
  Other: false

# Other spacing
SpacesInContainerLiterals: false
SpacesInSquareBrackets: false
SpacesInAngles: Never
SpaceBeforeRangeBasedForLoopColon: false
SpaceBeforeCaseColon: false

# ================ ALIGNMENT RULES ================
# Code alignment
AlignAfterOpenBracket: true
AlignEscapedNewlines: LeftWithLastLine

# Comments
AlignTrailingComments:
  Kind: Always
  OverEmptyLines: 2

# Pointers and references
DerivePointerAlignment: false
PointerAlignment: Left
ReferenceAlignment: Pointer

# ================ BREAKING RULES ================
# Statements and declarations
BreakBeforeConceptDeclarations: Always
AllowBreakBeforeNoexceptSpecifier: OnlyWithParen
BreakConstructorInitializers: BeforeComma

# Templates
BreakTemplateDeclarations: Yes
RequiresClausePosition: OwnLine

# ================ SHORT FORM ALLOWANCES ================
AllowShortLambdasOnASingleLine: None
AllowShortBlocksOnASingleLine: Empty
AllowShortFunctionsOnASingleLine: Inline
AllowShortLoopsOnASingleLine: false
AllowShortNamespacesOnASingleLine: false
AllowShortCompoundRequirementOnASingleLine: true
AllowAllParametersOfDeclarationOnNextLine: false
